<div class="preferences-container">
  <h2>Preferencias de Notificaciones</h2>

  <div *ngIf="isLoading" class="loading-indicator">
    <p>Cargando preferencias...</p>
  </div>

  <div *ngIf="errorLoading" class="error-message">
    <p>No se pudieron cargar tus preferencias de notificaciones. Por favor intenta más tarde.</p>
  </div>

  <form *ngIf="!isLoading && !errorLoading" [formGroup]="preferencesForm" (ngSubmit)="onSubmit()">
    <p class="form-description">
      Gestiona cómo recibes notificaciones de RecitApp.
    </p>

    <div *ngFor="let item of preferenceItems" class="preference-item">
      <label [for]="item.key">
        {{ item.label }}
      </label>
      <input type="checkbox" [id]="item.key" [formControlName]="item.key" />
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="!preferencesForm.dirty || isSaving">
        <span *ngIf="isSaving">Guardando...</span>
        <span *ngIf="!isSaving">Guardar Preferencias</span>
      </button>
    </div>

    <div *ngIf="saveSuccess" class="success-message form-feedback">
      ¡Preferencias guardadas exitosamente!
    </div>
    <div *ngIf="errorSaving" class="error-message form-feedback">
      Error al guardar las preferencias. Por favor intenta nuevamente.
    </div>
  </form>
</div> 